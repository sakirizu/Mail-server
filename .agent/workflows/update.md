---
description: 「更新」コマンドで要件定義書を自動更新
---

# 📝 ドキュメント自動更新ワークフロー

ユーザーが「**更新**」とだけ入力した場合、以下の処理を自動実行してください。

## 🔄 実行手順

### ステップ 1: プロジェクト状態のスキャン

1. **ファイル構造の確認**:
   - `src/` ディレクトリ内の全コンポーネントとスクリーンをリストアップ
   - `backend/` ディレクトリ内のサービスとAPIエンドポイントを確認
   - 新規追加・変更・削除されたファイルを特定

2. **コードベースの分析**:
   - 新しいAPI エンドポイントの検出
   - 新しいコンポーネント/画面の検出
   - データベーススキーマの変更検出

### ステップ 2: README.md の更新

以下の項目を最新の状態に更新:

1. **最終更新日時**: 現在の日時に更新
2. **実装状況**:
   - 各機能の完了状態 (✅/🔄/⬜) を実際のコードと照合
   - 進捗パーセンテージを再計算
3. **進捗サマリー**: 
   - 完了/進行中/未着手の数を更新
   - カテゴリ別進捗を更新
4. **今後の開発予定**:
   - 新たに完了した項目を「実装状況」セクションに移動
   - 新しい課題があれば追加
5. **更新履歴**:
   - 新しいエントリを追加（日付、変更内容）

### ステップ 3: CLAUDE.md の更新

以下の項目を最新の状態に更新:

1. **最終更新日時**: 現在の日時に更新
2. **API エンドポイント一覧**:
   - `backend/server.js` を解析して新しいエンドポイントを追加
   - 削除されたエンドポイントを除去
3. **データベーススキーマ**:
   - MySQL/MongoDBスキーマの変更を反映
4. **ディレクトリ構造**:
   - 新しいファイル/フォルダを反映
5. **未実装・課題**:
   - 完了した項目を除去
   - 新しい課題を追加

### ステップ 4: 更新内容の報告

ユーザーに以下の形式で報告:

```markdown
## 📊 ドキュメント更新完了

### 更新されたファイル
- README.md ✅
- CLAUDE.md ✅

### 検出された変更
- 新規ファイル: X件
- 変更ファイル: X件
- 新規API: X件

### 進捗サマリー
- 全体進捗: XX%
- 完了した機能: XX/XX
- 進行中: X
- 未着手: X

### 主な変更点
1. [変更点1の説明]
2. [変更点2の説明]
...
```

## 📋 チェックリスト

更新時に確認すべき項目:

- [ ] `src/screens/` 内の画面コンポーネント
- [ ] `src/components/` 内のUIコンポーネント
- [ ] `backend/server.js` 内のAPIエンドポイント
- [ ] `backend/*.js` 内のサービス
- [ ] `backend/*.sql` 内のスキーマ定義
- [ ] `package.json` の依存関係

## 🎯 判定基準

### 機能の完了判定

| 状態 | 条件 |
|------|------|
| ✅ 完了 | 対応するコード・APIが存在し、動作確認済み |
| 🔄 進行中 | コードは存在するがコメントアウトやTODOがある |
| ⬜ 未着手 | 対応するコード・APIが存在しない |

### 進捗計算

```
進捗(%) = (完了した機能数 / 全機能数) × 100
```

## ⚡ 自動実行トリガー

以下のキーワードで自動実行:

- `更新`
- `update`
- `ドキュメント更新`
- `sync docs`
